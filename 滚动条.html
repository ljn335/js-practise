<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<style>
		.wrap {
	      	overflow: hidden;
	      	width: 500px;
	      	background:pink;
	    }
	    .scrollOut {
		    width: 30px;
	      	height: 400px;
	      	border: 1px solid #000;
	      	position: relative;
	      	float: left;
	    }
	    .scroll {
	      width: 100%;
	      height: 60px;
	      background: rgb(31, 88, 215);
	      position: absolute;
	      left: 0;
	      top: 0;
	      border-radius: 10px;
	    }
	    .content {
	      width: 400px;
	      height: 400px;
	      border: 1px solid #000;
	      float: right;
	      margin-left: 30px;
	      overflow: hidden;
	      position: relative;
	    }
	    .content p {
	      margin: 0;
	      padding: 0;
	      position: absolute;
	      left: 0;
	      top: 0;
	    }
	</style>
</head>
<body>
	<div class="wrap">
		<div class="scrollOut">
	      	<div class="scroll"></div>
	    </div>
	    <div class="content">
	      	<p>杯子在多数时候，盛装的仅仅是半杯水，遇见的那个人依然似乎无法填补内心的空洞，时间一点一点地过去，水也一点一点地蒸发掉，你开始觉得他越来越无法满足你的全部幻想全部期待，对望的时候，彼此的眼里充满了空洞犹疑。杯子里面的水终于全部消失。分离是如此容易的一件事，就连曾经淡淡的水痕都刹那间无影无踪。生活似乎回到了最初的样子，天依旧蓝得透心，城市依旧匆忙得落寞。只是你不明白，为什么在每一个狂欢之夜，隐藏在人群中望着烟花绽放的夜空，会一边默默地流泪，一边强作笑颜。你对自己说是因为感动于这绚烂，没错，一切都太绚烂，绚烂得已经让你不知所措，绚烂得已经让你相信一切希望与期待都未曾出现过。于是决定走开，带着一只空旷而干涸的杯子，有的时候一边走一边疑惑，世界那么大，为什么那么渺小孤单的一滴雨还是会打在自己的脸庞上呢，人潮汹涌，流走的水再也无法收集，过去的心境再也无法找寻。有的时候，你在一些奇怪的梦里恍惚地以为曾经的一汪水，还心满意足地躺在自己杯子里面，只有醒过来的时候才了解，即使是沧海，多年之后也化作了桑田。杯子在多数时候，盛装的仅仅是半杯水，遇见的那个人依然似乎无法填补内心的空洞，时间一点一点地过去，水也一点一点地蒸发掉，你开始觉得他越来越无法满足你的全部幻想全部期待，对望的时候，彼此的眼里充满了空洞犹疑。杯子里面的水终于全部消失。分离是如此容易的一件事，就连曾经淡淡的水痕都刹那间无影无踪。生活似乎回到了最初的样子，天依旧蓝得透心，城市依旧匆忙得落寞。只是你不明白，为什么在每一个狂欢之夜，隐藏在人群中望着烟花绽放的夜空，会一边默默地流泪，一边强作笑颜。你对自己说是因为感动于这绚烂，没错，一切都太绚烂，绚烂得已经让你不知所措，绚烂得已经让你相信一切希望与期待都未曾出现过。于是决定走开，带着一只空旷而干涸的杯子，有的时候一边走一边疑惑，世界那么大，为什么那么渺小孤单的一滴雨还是会打在自己的脸庞上呢，人潮汹涌，流走的水再也无法收集，过去的心境再也无法找寻。有的时候，你在一些奇怪的梦里恍惚地以为曾经的一汪水，还心满意足地躺在自己杯子里面，只有醒过来的时候才了解，即使是沧海，多年之后也化作了桑田。杯子在多数时候，盛装的仅仅是半杯水，遇见的那个人依然似乎无法填补内心的空洞，时间一点一点地过去，水也一点一点地蒸发掉，你开始觉得他越来越无法满足你的全部幻想全部期待，对望的时候，彼此的眼里充满了空洞犹疑。杯子里面的水终于全部消失。分离是如此容易的一件事，就连曾经淡淡的水痕都刹那间无影无踪。生活似乎回到了最初的样子，天依旧蓝得透心，城市依旧匆忙得落寞。只是你不明白，为什么在每一个狂欢之夜，隐藏在人群中望着烟花绽放的夜空，会一边默默地流泪，一边强作笑颜。你对自己说是因为感动于这绚烂，没错，一切都太绚烂，绚烂得已经让你不知所措，绚烂得已经让你相信一切希望与期待都未曾出现过。于是决定走开，带着一只空旷而干涸的杯子，有的时候一边走一边疑惑，世界那么大，为什么那么渺小孤单的一滴雨还是会打在自己的脸庞上呢，人潮汹涌，流走的水再也无法收集，过去的心境再也无法找寻。有的时候，你在一些奇怪的梦里恍惚地以为曾经的一汪水，还心满意足地躺在自己杯子里面，只有醒过来的时候才了解，即使是沧海，多年之后也化作了桑田。
	      	</p>
	    </div>
	</div>
	<script>
		//公式：text.style.top=-(scroll.offsetTop / (scrollOut.clientHeight - scroll.offsetHeight)*sH)
		// 最外层容器
	    var wrap = document.querySelector('.wrap');
	    // 滚动条的容器
	    var scrollOut = document.querySelector('.scrollOut');
	    // 滚动条的滑块
	    var scroll = document.querySelector('.scroll');
	    // 文字的容器
	    var content = document.querySelector('.content');
	    // 文字段落
	    var text = document.querySelector('.content p');

	    var scrollInfo=scroll.getBoundingClientRect();
	    
	    // 获取的是能运动的最大top(990 - 400 = 590)
    	var sH = text.scrollHeight - content.clientHeight;

	    scroll.onmousedown=function (e){
	    	// 计算出鼠标按下的时候距离元素上侧的距离
	    	var dy=e.pageY-scrollInfo.top;
	    	// console.log(scrollInfo.top)
	    	document.onmousemove=function (e){
	    		//计算出滚动条上侧到父级上侧的距离,也就是scroll的top
	    		var t=e.pageY-dy-scrollOut.offsetTop;

	    		if(t<=0){
	    			t=0;
	    		}
	    		if(t>=scrollOut.clientHeight-scroll.offsetHeight){
	    			t = scrollOut.clientHeight - scroll.offsetHeight;
	    		}

	    		//滚动条走过的路与总路程（scrollOut-scroll）的百分比
	    		var d = scroll.offsetTop / (scrollOut.clientHeight - scroll.offsetHeight);

	    		text.style.top = -d*sH + 'px';
	    		scroll.style.top = t + 'px';
	    	};
	    	document.onmouseup = function (e){
		        this.onmouseup = this.onmousemove = null;
		    };
		    return false;
	    };


	    wheelEvent(wrap, function (){
	      // console.log(1);
	      scroll.style.top = scroll.offsetTop - 10 > 0 ? scroll.offsetTop - 10 + 'px' : 0 ;
	      // console.log(scroll.offsetTop / (scrollOut.clientHeight - scroll.offsetHeight))
	      text.style.top=-(scroll.offsetTop / (scrollOut.clientHeight - scroll.offsetHeight)*sH)+'px';
	    }, function (){
	      // console.log(2);
	      scroll.style.top = scroll.offsetTop + 10 < scrollOut.clientHeight - scroll.offsetHeight? scroll.offsetTop + 10 + 'px' : scrollOut.clientHeight - scroll.offsetHeight + 'px';
	      text.style.top=-(scroll.offsetTop / (scrollOut.clientHeight - scroll.offsetHeight)*sH)+'px';
	      // console.log(scroll.style.top)
	    })


	    					//对象，向上，向下
	    function wheelEvent(obj, fnUp, fnDown){
		    if(window.navigator.userAgent.indexOf('Firefox') > 0){
		    	obj.addEventListener('DOMMouseScroll', fn);
		    }else{
		        obj.addEventListener('mousewheel', fn);
		    }
		    function fn(e){
		        var diration;
		        if(e.wheelDelta){
		          	diration = e.wheelDelta > 0 ? true : false;
		        }
		        if(e.detail){
		          	diration = e.detail < 0 ? true : false;
		        }
		        if(diration){
		          	if(typeof fnUp === 'function'){
		            	fnUp.call(obj);
		          	}
		        }else{
		          	if(typeof fnDown === 'function'){
		            	fnDown.call(obj);
		          	}
		        }
		    }
	    }
	</script>
</body>
</html>